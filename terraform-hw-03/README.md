## Задание 1

|                                Номер и описание задачи                                | Описание выполненных действий                                                                                                                                           | Скриншоты                                                                                                                                     |
| :-------------------------------------------------------------------------------------------------------: | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1. Заполнить файл personal.auto.tfvars<br />и инициализировать проект | Заполнен файл personal.auto.tfvars.<br />В него занесены токен, id облака и id директории.<br />Инициализирован проект.        | ![1729619292930](image/README/1729619292930.png)                                                                                                         |
|                               2. Выполнить код проекта.                               | Выполнен код проекта.<br />Таким образом созданы сеть, подсеть<br />и правила безопасности для созданной сети. | ![1729619813106](image/README/1729619813106.png)<br />![1729619839965](image/README/1729619839965.png)<br />![1729619855874](image/README/1729619855874.png) |

## Задание 2

|                                                                                                                                                                                 Номер и описание задачи                                                                                                                                                                                 | Описание выполненных действий                                                                                                                                                                                                                                                                            | Скриншоты                                                                                                                                     |
| :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1. Создать файл count-vm.tf.<br />Описать в нем создание двух одинаковых ВМ <br />web-1 и web-2 <br />с минимальными параметрами, <br />используя метааргумент count loop.<br />Назначить этим ВМ созданную <br />в первом задании группу безопасности. | Создал файл count-vm.tf<br />и описал в нем создание ВМ <br />через count loop.<br />Назначил новым ВМ группу безопасности.<br />В variables.tf добавлены необходимые переменные.                                               | ![1729628937621](image/README/1729628937621.png)                                                                                                         |
|                                                                       2. Создать файл for_each-vm.tf<br />Описать создание ВМ main и replica через<br />for_each loop.<br />Использовать для обеих ВМ одну общую<br />переменную типа list(object({}))                                                                       | Создал файл for_each-vm.tf<br />и описал в нем создание ВМ<br />через for_each loop <br />и переменную each_vm.<br />В variables.tf добавлены <br />необходимые переменные.                                                                           | ![1729629146347](image/README/1729629146347.png)                                                                                                         |
|                                                                                                     3. Сделать так,<br />чтобы ВМ из задачи 1 <br />создавались только <br />после завершения создания<br />ВМ из задачи 2.                                                                                                     | Добавил depends_on в файл count-vm.tf.<br />Также, логичным было добавить depends_on <br />и в файл for_each-vm.tf, т.к. данные ВМ<br />зависят от создания VPC. <br />Добавил для "перестраховки"                                     | ![1729629404549](image/README/1729629404549.png)<br />![1729629429400](image/README/1729629429400.png)                                                     |
|                                        4. Использовать функцию file<br />для передачи в локальную переменную <br />содержимое файла <br />с публичным ssh ключом.<br />Реализовать использование <br />этой переменной в блоке metadata                                        | Создал файл locals.tf,<br />где объявил локальную переменную<br />public_ssh_key.<br />Этой переменной присвоил значение функции file.<br />Реализовал использование <br />этой переменной в блоке metadata. | ![1729629660873](image/README/1729629660873.png)<br />![1729629682674](image/README/1729629682674.png)<br />![1729629710316](image/README/1729629710316.png) |
|                                                                                                                                                                                        5. Выполнить код                                                                                                                                                                                        | Выполнил код. Все ВМ "поднялись".                                                                                                                                                                                                                                                                          | ![1729629789638](image/README/1729629789638.png)                                                                                                         |

## Задание 3

|                                                                                                           Номер и описание задачи                                                                                                           | Описание выполненных действий                                                                                                                                                                                                                                          | Скриншоты                             |
| :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
|                        1. Создать 3 одинаковых<br />виртуальных диска размером 1ГБ<br />через yandex_compute_disk<br />и мета аргумента count<br />в файле disk_vm.tf                        | В новойм файле disk_vm.tf<br />описал создание дисков.<br />В файл variables.tf добавил <br />необходимые переменные.                                                                                                            | ![1729630800748](image/README/1729630800748.png) |
| 2. В этом же файле описать<br />создание отдельной ВМ storage.<br />При помощи dynamic блока <br />подключить к ней вторичные <br />диски, созданные в задаче 1. | В этом же файле<br />описал создание ВМ storage,<br />а также добавл динамический блок<br />secondary_disk.<br />Добавл зависимости.<br />Добавил нужные переменные<br />в файл variables.tf | ![1729631867899](image/README/1729631867899.png) |
|                                                                                                                   3. Выполнить код                                                                                                                   | Выполнил код.<br />ВМ поднялась.<br />Диски к ней подключились.                                                                                                                                                                                        | ![1729632016525](image/README/1729632016525.png) |

## Задание 4

|                                              Номер и описание задачи                                              | Описание выполняемых действий                                                                                                                                                                                                                                      | Скриншоты                             |
| :------------------------------------------------------------------------------------------------------------------------------------: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
| 1. В файле ansible.tf<br />создать inventory,<br />используя функию templatefile и файл шаблон. | Создан файл ansible.tf<br />в котором описан вызов функции<br />templatefile.<br />Переданы переменные.                                                                                                                                 | ![1729676989921](image/README/1729676989921.png) |
|    2. Сделать так, чтобы инвентарь<br />содержал 3 группы и был динамическим.    | В файле-шаблоне hosts.tftpl<br />реализована динамическая генерация<br />за исключением группы storage,<br />потому как в ресурсе yandex_compute_instance.storage<br />создана одиночная VM. | ![1729677202942](image/README/1729677202942.png) |
|                  3. Добавить в инвентарь переменную fqdn<br />Выполнить код.                  | В файл-шаблон hosts.tftpl добавлена переменная fqdn                                                                                                                                                                                                             | ![1729677219526](image/README/1729677219526.png) |

## Задание 5

|                                                         Нормер и описание задачи                                                         | Описание выполняемых действий                                                                                                                                                                                                                                             | Скриншоты                                                                                 |
| :------------------------------------------------------------------------------------------------------------------------------------------------------------: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |
| 1. Написать output,<br />который отобразит ВМ из<br />ресурсов count и for_each в виде списка словарей | Создал файл outputs.tf<br />в котором описал output переменную vm_list.<br />Т.к. в yandex_compute_instance.storage <br />у нас только одиночная ВМ<br />то её добавление выглядит слегка хардкодно. | ![1729686058215](image/README/1729686058215.png)<br />![1729686079425](image/README/1729686079425.png) |

## Задание 6

|                                       Номер и описание задачи                                       | Описание выполняемых действий                                                           | Скриншоты                             |
| :---------------------------------------------------------------------------------------------------------------------: | ------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------- |
| 1. Используя null_resource<br />и local-exec применить ansible-playbook к машинам webservers | Скопировал содержимое файлов из демонстрации<br />Выполнил код. | ![1729687671135](image/README/1729687671135.png) |

## Задание 8

|   Номер и описание задачи   | Описание выполняемых действий                                                                                                                                                            | Скриншоты                             |
| :----------------------------------------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
| 1. Идентифицировать ошибки | Поставлен лишний пробел после "platform_id"<br />Некорректно поставлена фигурная скобка.<br />Она должна быть после "nat_ip_address" | ![1729688329582](image/README/1729688329582.png) |
