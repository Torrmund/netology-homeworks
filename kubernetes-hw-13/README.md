# Домашнее задание к занятию "Как работает сеть в K8s"

## Задание

1. Создать deployment'ы приложений frontend, backend и cache и соответствующие сервисы.
2. В качестве образа использовать network-multitool
3. Разместить поды в namespace App
4. Создать политики, чтобы обеспечить дооступ frontend -> backend -> cache. Другие виды подключений должны быть запрещены.
5. Продемонстрировать, что трафик разрешен и запрещен.


## Решение

Для решения буду использовать ВМ с поднятым microk8s

| Номер и описание задачи                                                                 | Описание выполняемых действий                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Скриншоты                                                                                                                                                                                                                                                                                                                                                     |
| ----------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1. Создать namespace для развертывания                                               | Создал namespace app согласно задаче.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | ![1741445765138](image/README/1741445765138.png)                                                                                                                                                                                                                                                                                                                         |
| 2. Создать deployment'ы и сервисы                                                           | Описал манифесты деплойментов и сервисов<br />согласно задаче.<br />Манифесты выложил в директорию src рядом с данным<br />readme.<br /><br />В качестве образа использовал network-multitool.<br /><br />Применил манифесты.<br /><br />Удостоверился, что поды поднялись и сервисы созданы.                                                                                                                                                                                                         | ![1741450268130](image/README/1741450268130.png) <br />![1741447733188](image/README/1741447733188.png)<br />![1741447960055](image/README/1741447960055.png)                                                                                                                                                                                                                |
| 3. Создать политики согласно заданию                                          | Описал манифесты сетевых политик для реализации<br />правил прохождения трафика согласно заданию.<br /><br />Реализовано следующим образом:<br />Запрещаем весь трафик между подами<br />Затем разрешаем только тот трафик между подами,<br />который нам нужен по заданию. В том числе разрешаем<br />доступ к dns.<br /><br />Применил манифесты.                                                                               | ![1741448286185](image/README/1741448286185.png)<br />![1741448328613](image/README/1741448328613.png)<br />![1741449531801](image/README/1741449531801.png)<br />![1741451408184](image/README/1741451408184.png)<br />![1741451430958](image/README/1741451430958.png)<br />![1741451444817](image/README/1741451444817.png)<br />![1741451464540](image/README/1741451464540.png) |
| 4. Проверить корректность работы<br />реализованных политик. | Проверил доступ frontend -> backend. Успешно.<br /><br />Проверил доступ backend -> cache. Успешно.<br /><br />Проверил доступ frontend -> cache. Ответа нет, т.к. запрещено<br />подобное соединение.<br /><br />Проверил доступ cache -> frontend. Ответа нет, т.к. запрещено<br />подобное соединение.<br /><br />Проверил доступ backend -> frontend. Ответа нет, т.к. запрещено<br />подобное соединение.<br /><br />Политики работают корректно. | ![1741451495423](image/README/1741451495423.png)<br />![1741451547911](image/README/1741451547911.png)<br />![1741451842855](image/README/1741451842855.png)<br />![1741451908933](image/README/1741451908933.png)<br />![1741451996773](image/README/1741451996773.png)                                                                                                         |
