# Домашнее задание к занятию "Запуск приложений в K8S"

## Задание 1

| Номер и описание задачи                                                                                                                                                                          | Описание выполняемых действий                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Скриншоты                                                                                                                                                                                         |
| -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1. Создать Deployment приложения, сотоящего из двух<br />контейнеров - nginx и multitool.                                                                                | Создал файл манифеста<br />nginx-multitool.yml<br />Описал манифейт.<br />Применил его.<br /><br />Появилась ошибка по контейнеру<br />multitool.<br /><br />Посмотрел лог ошибки.<br /><br />Связана ошибка с тем, что nginx<br />внутри контейнера multitool<br />пытается забиндить 80 порт, который<br />уже используется другим контейнером<br />nginx. Конфликт вызван тем, что внутри<br />одного пода контейнеры используют<br />одно пространство портов.<br /><br />Скорректировал манифест, передав в <br />контейнер multitool переменную окружения<br />которая переназначет порт HTTP.<br /><br />Применил обновленный манифест.<br />Убедился, что оба контейнера стартуют.<br />Проверил логи контейнеров. | ![1738497132998](image/README/1738497132998.png)<br />![1738497536419](image/README/1738497536419.png)<br />![1738497558846](image/README/1738497558846.png)<br />![1738497741243](image/README/1738497741243.png) |
| 2. Увеличить количество реплик работающего<br /> приложения до 2                                                                                                     | Скорректировал манифест deployment<br />указав количество реплик равным 2.<br /><br />Применил обновленный манифест.<br />Проверил, что второй экземпляр поднялся.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | ![1738497928605](image/README/1738497928605.png)<br />![1738497945712](image/README/1738497945712.png)                                                                                                         |
| 3. Создать svc, который обеспечит доступ до реплик<br />развернутых приложений.                                                                            | Описал манифест создания svc в отдельном<br />файле nginx-multitool-svc.yml<br /><br />Применил манифест<br /><br />Убедился, что svc создан                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | ![1738498432232](image/README/1738498432232.png)<br />![1738498460509](image/README/1738498460509.png)                                                                                                         |
| 4. Создать отдельный pod с приложением multitool<br />и убедиться с помощью curl, что из пода есть доступ до<br />приложений из п.1. | Написал простой манифест для развертывания<br />пода с multitool.<br /><br />Выполнил внутри нового контейнера запросы<br />curl по имени svc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | ![1738498680306](image/README/1738498680306.png)<br />![1738498703976](image/README/1738498703976.png)<br />![1738498826722](image/README/1738498826722.png)                                                     |

## Задание 2

| Номер и описание задачи                                                                                                                                                                                       | Описание выполняемых действи                                                  | Скриншоты                                                                                 |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |
| 1. Создать deployment приложения nginx и обеспечить<br />старт контейнера только после того, как будет запущен<br />svc этого приложения. | Описан манифест deployment<br />Применил манифест.                        | ![1738499976530](image/README/1738499976530.png)<br />![1738499961527](image/README/1738499961527.png) |
| 2. Убедиться что nginx не стартует. В качестве init-контейнера<br />использовать busybox.                                                                                    | Убедился, что nginx не стартует                                                    | ![1738500016888](image/README/1738500016888.png)                                                     |
| 3. Создать и запустить сервис. Убедиться что init отработал.                                                                                                                          | Описал манифест svc.<br />Применил манифест.                              | ![1738500205633](image/README/1738500205633.png)<br />![1738500809211](image/README/1738500809211.png) |
| 4. Продемонстрировать состояние пода до и после запуска сервиса                                                                                                              | После создания svc под инициализировался<br />и запустился. | ![1738500826781](image/README/1738500826781.png)                                                     |

Все манифесты выложил в директрию src рядом с данным README.
