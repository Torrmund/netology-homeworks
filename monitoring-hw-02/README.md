# Домашнее задание к занятию "Grafana"

## Задание 1

|                                                                      Номер и описание задачи                                                                      | Описание выполняемых действий                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Скриншоты                                                                                                                                                                                                                                                                                                 |
| :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
|                                    1. Развернуть стек prometheus +<br />grafana +<br />node_exporter<br />через docker compose.                                    | Поднял отдельную ВМ и установил<br />в нее docker и docker compose.<br />Создал директорию prometheus для <br />проекта.<br />Описал манифест compose и <br />создал конфигурационные файлы.<br />Поднял сервисы.<br />Ссылки на документацию используемых<br />образов:<br />- [node_exporter](https://hub.docker.com/r/prom/node-exporter) <br />- [grafana](https://hub.docker.com/r/grafana/grafana) <br />- [prometheus](https://hub.docker.com/r/ubuntu/prometheus) | ![1736424510568](image/README/1736424510568.png)<br />![1736424539578](image/README/1736424539578.png)<br />![1736424614714](image/README/1736424614714.png)<br />![1736424889850](image/README/1736424889850.png)<br />![1736425564242](image/README/1736425564242.png)<br />![1736425466894](image/README/1736425466894.png) |
| 2. Зайти в веб-интерфейс grafana,<br />используя авторизационные данные,<br />указанные в манифесте docker-compose | Зашел в веб-интерфейс Grafana.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | ![1736425694861](image/README/1736425694861.png)<br />![1736425723419](image/README/1736425723419.png)                                                                                                                                                                                                                 |
|                                       3. Подключить поднятый ранее Prometheus<br />как источник данных.                                       | Подключил источник данных - Prometheus<br />развернутый ранее.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | ![1736425749928](image/README/1736425749928.png)<br />![1736425761492](image/README/1736425761492.png)<br />![1736425782988](image/README/1736425782988.png)<br />![1736425870701](image/README/1736425870701.png)<br />![1736425886401](image/README/1736425886401.png)                                                     |
|                    4. Приложить скриншот веб-интерфейса<br />grafana со списком подключенных <br />Datasource                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | ![1736425909596](image/README/1736425909596.png)                                                                                                                                                                                                                                                                     |

## Задание 2

| Номер и описание задачи                                                                                                       | Описание выполняемых действий                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Скриншоты                                                                                                                                                                                                                                                                                                 |
| ------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1. Создать Dashboard                                                                                                                       | Создал дашборд                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | ![1736435681986](image/README/1736435681986.png)                                                                                                                                                                                                                                                                     |
| 2. Создать на дашборде панель:<br />- Утилизация CPU для node_exporter<br />(в процентах, 100-idle) | Создал панель CPU Utilization<br />Настроил понятное отображение<br />информации.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | ![1736435729089](image/README/1736435729089.png)<br />![1736435788159](image/README/1736435788159.png)                                                                                                                                                                                                                 |
| 3. Создать на дашборде панель:<br />- CPULA 1/5/15;                                                                        | Создал 3 панели Load Average 1/5/15.<br />Запросы соответствующие:<br />node_load1<br />node_load5<br />node_load15<br />Настроил понятное отображение информации<br />(на машине 4 vCPU, т.е. 4 потока).                                                                                                                                                                                                                                                                                                                                                             | ![1736436222160](image/README/1736436222160.png)<br />![1736436246452](image/README/1736436246452.png)<br />![1736436299115](image/README/1736436299115.png)<br />![1736436826392](image/README/1736436826392.png)                                                                                                         |
| 4. Создать на дашборде панель:<br />- Количество свободной оперативной памяти          | Создал панель Free Memory (%)<br />Настроил понятное отображение информации                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | ![1736436873637](image/README/1736436873637.png)<br />![1736436890641](image/README/1736436890641.png)                                                                                                                                                                                                                 |
| 5. Создать на дашборде панель:<br />- Количества места на файловой системе.                | Создал панель Filesystem Free Space (GiB)<br />Настроил понятное отображение информации                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | ![1736437933391](image/README/1736437933391.png)<br />![1736437981188](image/README/1736437981188.png)                                                                                                                                                                                                                 |
| 6. Протестировать полученный дашборд                                                                              | Дополнительно распределил по соответствующим<br />row.<br />Для нагрузки на CPU установил пакет stress на<br />тестовую машину и запустил стресс тест:<br />- 3 процесса<br />- 1GB ОЗУ на каждый<br />- таймаут 250 секунд.<br />Посмотрел на изменения графиков в моем дашборде.<br />Запустил стресс тест на запись файлов на диск.<br />Посмотрел на изменение графика на моем дашборде. | ![1736438134511](image/README/1736438134511.png)<br />![1736438550017](image/README/1736438550017.png)<br />![1736438632627](image/README/1736438632627.png)<br />![1736438642728](image/README/1736438642728.png)<br />![1736439315984](image/README/1736439315984.png)<br />![1736439371042](image/README/1736439371042.png) |

## Задание 3

| Номер и описание задачи                                         | Описание выполняемых действий                                                                                                                                                             | Скриншоты                                                                                                                                                                                                                                             |
| ----------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1. Создать для каждой панели<br />подходящий alert. | Создал правила для всех панелей<br />своего дашборда.<br />Дополнительно настроил отправку <br />уведомлений себе в telegram. | ![1736439562497](image/README/1736439562497.png)<br />![1736441184023](image/README/1736441184023.png)                                                                                                                                                             |
| 2. Прикрепить скриншот полученного дашборда    | Скорректировал алерты таким образом,<br />чтобы они сработали при тестировании.                                                                      | ![1736443405738](image/README/1736443405738.png)<br />![1736443438358](image/README/1736443438358.png)<br />![1736443451970](image/README/1736443451970.png)<br />![1736443490519](image/README/1736443490519.png)<br />![1736443499669](image/README/1736443499669.png) |

## Задание 4

| Номер и описание задачи                                  | Описание выполняемых действий                                                                                | Скриншоты                             |
| ---------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
| 1. Сохранить дашборд в формате<br />JSON.            | Открыл JSON Model и сохранил содержимое в отдельный файл                                         | ![1736443747662](image/README/1736443747662.png) |
| 2. Приложить листинг полученного<br />файла. | Файл выложен в директорию src/prometheus/grafana/provisioning/dashboards/<br />рядом с данным README. |                                                |
