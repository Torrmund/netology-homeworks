## Задание 1

|                                                   Номер и<br />описание задачи                                                   | Описание выполненных действий                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Скриншоты                                                                                                                                                                                                                                             |
| :---------------------------------------------------------------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                                 2. Создать сервисный аккаунт<br />и ключ для него                                 | Создан сервисный аккаунт<br />terraform-test и ключ для него<br />Ключ скачан в виде файла .authorized_key.json <br />и размещен в домашней директории.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | ![1726925014632](image/README/1726925014632.png)                                                                                                                                                                                                                 |
|                          3. Добавить свой public key<br />в переменную <br />vms_ssh_public_root_key                          | Личный public key записан<br />в переменную vm_ssh_root_key                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | ![1726925603818](image/README/1726925603818.png)                                                                                                                                                                                                                 |
|  4. Инициализировать проект.<br />Выполнить код, исправив <br />синтаксические ошибки.  | 1. standart вместо standard<br /><br />2. платформы standard-v4<br /><br />не существует. укзать от v1 до v3.<br />Я указал v2.<br /><br />3. При указании платформы standard-v2 <br />появляется ошибка о некорректном числе ядер <br />(допускается указание 2,4). <br />Указал 2 ядра в cores. <br />При этом если указать платформу standard-v3, <br />то принимается значение cores = 1, <br />но не принимается cores_fraction = 5 <br />(принимается только 20,50,100))<br /><br />После внесения указанных изменений <br />код выполнился. | ![1726925686521](image/README/1726925686521.png)<br />![1726926628173](image/README/1726926628173.png)<br />![1726927308970](image/README/1726927308970.png)<br />![1726927320425](image/README/1726927320425.png)<br />![1726927354722](image/README/1726927354722.png) |
|        5. Подключиться<br />к созданной ВМ через SSH <br />и выполнить команду curl ifconfig.me        | Подключился по ssh ubuntu@ipvm<br />и ввел команду                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | ![1726927535506](image/README/1726927535506.png)<br />![1726927585958](image/README/1726927585958.png)                                                                                                                                                             |
| 6. Как в процессе обучения<br />могут пригодиться параметры <br />preemtible = true и core_fraction=5 ? | Флаг preemtible делает создаваемую ВМ "прерываемой",<br />а core_fraction задает ограничение на использование CPU.<br /><br />Вместе эти параметры помогают <br />существенно снизить стоимость использования этой ВМ.                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                                                                                                                                |

## Задание 2

|                                                                                              Номер и<br />описание задачи                                                                                              | Описание выполненных действий                   | Скриншоты                             |
| :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | -------------------------------------------------------------------------- | ---------------------------------------------- |
| 1. Заменть хардкод значения для ресусров<br />compute_image и compute_instance <br />на отдельные переменные. <br />К переменным добавить префикс vm_web_ | Хардкод заменен на переменные.                   | ![1726930036373](image/README/1726930036373.png) |
|                                      2. Объявить нужные переменные<br />в файле variables.tf<br />Заполнить их default прежними значениями                                      | Объявлены дополнительные<br />переменные. | ![1726930074879](image/README/1726930074879.png) |
|                                                                          3. Проверить terraform plan<br />Изменений быть не должно.                                                                          |                                                                            | ![1726930161606](image/README/1726930161606.png) |

## Задание 3

|                                                                                                                   Номер и<br />описание задачи                                                                                                                   | Описание выполненных действий                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Скриншоты                             |
| :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
| 1. Создать новый файл<br />для переменных <br />vms_platform.tf<br />Скопировать в него <br />переменные из variables.tf<br />Скорректировать переменные <br />под второй инстанс. | Создал файл vms_platform.tf<br />в него скопировал переменные для ВМ<br /> из variables.tf<br /><br />Заменил префиксы с vm_web_ на vm_db<br />и скорректировал переменные <br />согласно постановке.<br /><br />(Копируются в новый файл только <br />новые переменные. <br />Если скопировать все переменные, <br />то будет появляться ошибка <br />о дублировании переменных)                                                                                                          | ![1726939271734](image/README/1726939271734.png) |
|                                                          2. Скопировать блок ресурса в main.tf<br />и создать еще одну ВМ с <br />другими характеристиками                                                          | Скопировал ресурс yandex_compute_instance<br />в файле main.tf<br /><br />Скорректировал имя ресурса для второй ВМ.<br /><br />Скорректировал названия переменных для второй ВМ.<br /><br />Добавил ресурс yandex_vpc_subnet.develop_db<br />так как зоны у первой и второй ВМ различаются, <br />то под вторую ВМ следует создать еще одну подсеть <br />в нужной зоне.<br /><br />Переопределил параметр zone для <br />второй ВМ согласно постановке. | ![1726939294684](image/README/1726939294684.png) |
|                                                                                                                       3. Применить изменения                                                                                                                       | Применил изменения.<br />Создалась новая подсеть в зоне ru-central1-b.<br />Создалась новая ВМ в зоне ru-central1-b и с параметрами <br />согласно постановке.                                                                                                                                                                                                                                                                                                                                                                                                                                                         | ![1726939409259](image/README/1726939409259.png) |

## Задание 4

|                                                                          Номер и<br />описание задачи                                                                          | Описание выполненных действий | Скриншоты                             |
| :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | -------------------------------------------------------- | ---------------------------------------------- |
| 1. В файле outputs.tf объявить одну<br />output переменную, которая содержит<br />instance_name, external_ip и fqdn <br />для каждой из ВМ | Объявил переменную                      | ![1726941368127](image/README/1726941368127.png) |
|                                                        2. Применить изменения<br />и выполнить terraform output                                                        |                                                          | ![1726941435855](image/README/1726941435855.png) |


## Задание 5

|                                                                              Номер и<br />описание задачи                                                                              | Описание выполненных действий                                                                                                                                             | скриншоты                                                                                                                                     |
| :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 1. В файле locals.tf описать<br />в одном блоке имя каждой ВМ, <br />используя интерполяцию с несколькими <br />переменными | Объявил локальные переменные.<br />Скорректировал имеющиеся переменные                                                                    | ![1726942880781](image/README/1726942880781.png)<br />![1726942937501](image/README/1726942937501.png)<br />![1726942951066](image/README/1726942951066.png) |
|                                                     2. Заменить переменные внутри<br />ресурса на созданные                                                     | Заменил переменные внутри ресурсов                                                                                                                                    | ![1726942910401](image/README/1726942910401.png)                                                                                                         |
|                                                                                  3. Применить изменения                                                                                  | Т.к. локальные переменные подобраны так, <br />что имена формируются одинаковые, <br />то изменений на инфре нет. | ![1726942967966](image/README/1726942967966.png)                                                                                                         |


## Задание 6

|                                    Номер и<br />описание задачи                                    | Описание выполняемых действий                                      | Скриншоты                                                                                 |
| :--------------------------------------------------------------------------------------------------------------------: | --------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |
| 1. Объединить cores, memory,<br />core_fraction <br />в единую map-переменную vms_resources | Объявил переменную                                                           | ![1726944017813](image/README/1726944017813.png)<br />![1726944760388](image/README/1726944760388.png) |
|             2. Создать отдельную map<br />переменную для блока metadata             | Объявил переменную                                                           | ![1726944646124](image/README/1726944646124.png)<br />![1726944804091](image/README/1726944804091.png) |
|    3. Закомментировать<br />неиспользуемые переменные <br />проекта    | Закомментировал<br />неиспользуемые переменные         |                                                                                                    |
|                   4. Проверить план.<br />Изменений быть не должно                   | Проверил план.<br />Изменений в инфре не требовалось. | ![1726944849133](image/README/1726944849133.png)                                                     |


## Задание 7

|                                          Номер и<br />описание задачи                                          | Описание выполняемых действий                                                                                                                                                                                                                        | Скриншоты                             |
| :--------------------------------------------------------------------------------------------------------------------------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |
| 1. Какой командой<br />можно отобразить <br />второй элемент списка <br />test_list |                                                                                                                                                                                                                                                                                 | ![1726945772639](image/README/1726945772639.png) |
|                                        2. Найти длину списка<br />test_list                                        |                                                                                                                                                                                                                                                                                 | ![1726945835410](image/README/1726945835410.png) |
|                         3. Отобразить значение ключа<br />admin из map test_map                         |                                                                                                                                                                                                                                                                                 | ![1726945917512](image/README/1726945917512.png) |
|                            4. Написать интерполяционное<br />выражение                            | `"${local.test_map["admin"]} is admin for ${local.test_list[2]} server based on OS ${local.servers["production"].image} with ${local.servers["production"].cpu} vcpu, ${local.servers["production"].ram} ram and ${length(local.servers["production"].disks)} virtual disks"` | ![1726946776503](image/README/1726946776503.png) |


## Задание 8

|                                                               Номер и<br />описание задачи                                                               | Описание выполняемых действий | Скриншоты                             |
| :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | -------------------------------------------------------- | ---------------------------------------------- |
|                     1. Объявить переменную<br />и её дефолтное значение <br />согласно постановке                     | Объявил переменную                      | ![1726948053270](image/README/1726948053270.png) |
| 2. В консоли написать выражение,<br />которое вычленит определенную строку <br />из этой переменной |                                                          | ![1726947930845](image/README/1726947930845.png) |
