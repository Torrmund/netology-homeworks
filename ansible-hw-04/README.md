# Домашнее задание к занятию 4 "Работа с roles"

|                                                                   Номер и описание задачи                                                                   | Описание выполняемых действий                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Скриншоты                                                                                                                                                                                                                                   |
| :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|                      1. Создать файл requirements.yml<br />Добавить описание роли<br />для установки clickhouse.                      | Создан файл requirements.yml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | ![1731435811963](image/README/1731435811963.png)                                                                                                                                                                                                       |
|                                              2. При помощи ansible-galaxy скачать<br />указанную роль.                                              | Указанная роль установлена через<br />ansible-galaxy                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | ![1731435873431](image/README/1731435873431.png)<br />![1731435909755](image/README/1731435909755.png)                                                                                                                                                   |
| 3. Создать роли для установки Vector<br />и Lighthouse.<br />Выложить все роли в репозитории.<br />Добавить теги. | Созданы роли для установки Vector,<br />Nginx и Lighthouse.<br />Роли запушены в свои репозитории<br />с тегами.                                                                                                                                                                                                                                                                                                                                                                                             | Ссылки на репозитории ролей:<br />https://github.com/Torrmund/ansible_vector_role/tree/main<br />https://github.com/Torrmund/ansible_role_lighthouse/tree/main<br />https://github.com/Torrmund/ansible_role_nginx/tree/main |
|                             4. В requirements.yml добавить описание<br />новых ролей.<br />Установить роли.                             | В requirements.yml добавлено<br />описание новых ролей.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | ![1731436199265](image/README/1731436199265.png)<br />![1731436212686](image/README/1731436212686.png)                                                                                                                                                   |
|                                 5. Переработать playbook и<br />переменные под использование ролей.                                 | Переработан playbook и переменные<br />под использование ролей.                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ![1731436310253](image/README/1731436310253.png)<br />![1731436324712](image/README/1731436324712.png)<br />![1731436350563](image/README/1731436350563.png)                                                                                               |
|                                                     6. Проверить работоспособность проекта.                                                     | Playbook проигран не тестовой<br />инфраструктуре.<br />Таблица в Clickhouse была создана вручную,<br />потому как функции создания таблиц <br />с кастомными параметрами через<br />предложенную в задании роль я не нашел.<br />Проект полностью работоспособен.<br />Playbook идемпотентен.<br />С playbook можете ознакомиться в<br />/src/playbook | ![1731436520532](image/README/1731436520532.png)<br />![1731436485355](image/README/1731436485355.png)<br />![1731436619375](image/README/1731436619375.png)                                                                                               |
