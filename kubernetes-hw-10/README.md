# Домашнее задание к занятию "Helm"

## Подготовка к выполнению

| Номер и описание задачи                             | Описание выполняемых действий                                                                                                                                                                                                                                                                                                                                                             | Скриншоты                                                                                                                                                                                                                                             |
| ----------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Установить helm на свою локальную машину | 1. Скачал бинарник helm последней версии из релизной статьи:<br />https://github.com/helm/helm/releases<br /><br />2. Распаковал архив.<br /><br />3. Переместил бинарь в директорию /usr/local/bin/<br /><br />4. Проверил вызов команды helm<br /><br />5. Настроил Completion Helm для Bash | ![1740224819627](image/README/1740224819627.png)<br />![1740224908451](image/README/1740224908451.png)<br />![1740227077780](image/README/1740227077780.png)<br />![1740227164374](image/README/1740227164374.png)<br />![1740227500225](image/README/1740227500225.png) |

## Задание 1

| Номер и описание задачи                                                                                                                                                                                                   | Описание выполняемых действий                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Скриншот                                                                                                                                                                                                                                                                                                                                                       |
| --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1. Подготовить приложение,<br />для которого будет создаваться чарт.                                                                                                                      | Написал приложение на Python для создания<br />и просмотра заметок.<br />Приложение работает на flask.<br />В качестве хранилища заметок будет использоваться<br />PostgreSQL.<br /><br />Проработал сборку образа приложения.<br /><br />Собрал приложение и запушил в Docker Hub.<br /><br />Исходный код приложения выложил в директорию<br />src/app/ рядом с данным readme.                                | ![1740266095280](image/README/1740266095280.png) <br />![1740260496820](image/README/1740260496820.png)<br />![1740260511398](image/README/1740260511398.png)                                                                                                                                                                                                                |
| 2. Упаковать приложение в чарт, для<br />деплоя в разные окружения.<br />Каждый компонент деплоится отдельным<br />deployment'ом или statefulset'ом. | Создал чарт при помощи helm create <имя чарта><br /><br />Описал все необходимое в чарте.<br />С содержимом чарта можно ознакомиться в <br />директории src/notes-app/ рядом с данным readme<br /><br />Данный чарт подразумевает использование PV.<br />Соответственно, перед установкой чарта, следует <br />предвартельно создать требуемый PV.<br />Описал и применил его манифест. | ![1740260881021](image/README/1740260881021.png)<br />![1740260896007](image/README/1740260896007.png)<br />![1740260905428](image/README/1740260905428.png)<br />![1740260916844](image/README/1740260916844.png)<br />![1740260929110](image/README/1740260929110.png)<br />![1740261087947](image/README/1740261087947.png)<br />![1740261122942](image/README/1740261122942.png) |
| 3. Попробовать установить чарт.                                                                                                                                                                                      | Предварительно создал namespace, в котором<br />будет разворачиваться приложение из чарта.<br /><br />Запустил установку чарта.<br /><br />Чарт развернулся.<br /><br />Потребовались правки в конфиге приложения.<br />Выпустил новую версию образа приложения (0.3.0).<br />Обновил развернутое приложение через Helm.<br /><br />Приложение стало доступно.                                       | ![1740266132069](image/README/1740266132069.png)<br />![1740266280895](image/README/1740266280895.png)<br />![1740266559126](image/README/1740266559126.png)<br />![1740266692489](image/README/1740266692489.png)<br />![1740266705992](image/README/1740266705992.png)                                                                                                         |

## Задание 2

| Номер и описание задачи                                                    | Описание выполняемых действйи                                                                   | Скриншоты                                                                                                                                                                                                                                                                                                                                                     |
| ---------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1. Развернуть разные версии приложения<br />в разных NS | Создал ns и дополнительные локальные pv.<br />Разные релизы в разные ns.  | ![1740266965117](image/README/1740266965117.png)<br />![1740267093837](image/README/1740267093837.png)<br />![1740267189940](image/README/1740267189940.png)<br />![1740269777527](image/README/1740269777527.png)<br />![1740269812973](image/README/1740269812973.png)<br />![1740269822369](image/README/1740269822369.png)<br />![1740269831596](image/README/1740269831596.png) |
|                                                                                                | Код приложения и чарт выложил в директорию<br />src рядом с данным readme. |                                                                                                                                                                                                                                                                                                                                                                        |
